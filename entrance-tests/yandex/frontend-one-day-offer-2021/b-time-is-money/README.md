# [B. Время - деньги [25 баллов]](https://contest.yandex.ru/contest/24470/problems/B/)

**Ограничение времени:** 10 секунд \
**Ограничение памяти:** 64Mb \
**Ввод:** input.json \
**Вывод:** стандартный вывод или output.json

Коля изобрёл машину времени у себя в гараже и решил на этом заработать. Но так как он знает, что Организация Контроля Времени может забрать у него машину, он решил вести себя осторожнее и использовать рынок ценных бумаг в качестве источника дохода.

Он отправился в будущее, посмотрел там историю котировок по акциям компании FAIS. Компания примечательна тем, что один человек может держать только одну акцию. Но когда Коля увидел историю, он понял, что сам не сможет вычислить, когда нужно покупать акцию, а когда продавать. Тогда он обратился за помощью к вам, пообещав отдать половину заработанных денег.

Вам прекрасно известно, что за подобные махинации могут оштрафовать или даже посадить в тюрьму, и вы решили посчитать, стоит ли участвовать в этом. Вы уже решали подобную алгоритмическую задачу пару лет назад и смогли найти свой старый код. К сожалению, его производительности не хватает, чтобы посчитать результат за адекватное время.

Вам нужно оптимизировать представленную программу, которая вычисляет максимально возможный доход из всех возможных, опираясь на данные котировок. При этом не нужно учитывать деньги, которые тратятся на покупку акций, так как Коля собирается взять их со своего счёта.

## Ваш старый код

Входные данные — массив чисел, каждое из которых отражает цену акции в конкретный день. \
Выходные данные — одно число, обозначающее максимально возможную прибыль.

```javascript
var maxProfit = function (prices) {  
    return calculate(prices, 0);  
}  
 
function calculate(prices, index) {  
    if (index >= prices.length) {  
        return 0;  
    }  
 
    var maxProfix = 0;  
 
    for (var start = index; start < prices.length; start++) {  
        var localMaxProfit = 0;  
        for (var i = start + 1; i < prices.length; i++) {  
            if (prices[start] < prices[i]) {  
                var profit = calculate(prices, i + 1) + prices[i] - prices[start];  
                if (profit > localMaxProfit) {  
                    localMaxProfit = profit;  
                }  
            }  
        }  
 
        if (localMaxProfit > maxProfix)  
            maxProfix = localMaxProfit;  
    }  
    return maxProfix;  
}
```

## Примеры работы

### Пример 1
**Вход:** `[71,11,51,31,61,41]` \
**Выход:** `70`

Покупаем во второй день по цене 11 и продаём на третий день за 51, прибыль — 40. После этого покупаем за 31 в четвёртый день и продаем на пятый за 61, прибыль — 30. В итоге получаем прибыль 70.

### Пример 2
**Вход:** `[13,24,35,46,57]` \
**Выход:** 44

Покупаем в первый день, продаём в последний.

### Пример 3
**Вход:** `[700,612,445,343,10]` \
**Выход:** `0`

Здесь вообще невозможно заработать, поэтому максимальная прибыль — 0.

## Примечания

В качестве решения предоставьте файл, который экспортирует исправленный вариант функции `maxProfit`:
```javascript
function maxProfit(prices) {  
  // ...  
}
 
module.exports = maxProfit;
```

Решение будет запускаться в NodeJS 12.
